  @startuml Get Dentists (GET)

  footer Page %page% of %lastpage%
  title "Get Dentists"

  participant "User" as user
  participant "<<JavaScript>>\n:server" as server
  participant "<<router>>\n:dentists" as routerDentists
  participant "<<controllers>>\n:dentists" as controllersDentists
  participant "<<model>>\n:Dentist" as modelDentist
  participant "<<model>>\n:Booking" as modelBooking
  database "<<MongoDB>>\n:dentists" as DentistsDatabase

  user -> server ++ : req.get('/api/v1/dentists')
  server -> routerDentists ++ : app.use('/api/v1/dentists', dentists)
  routerDentists -> controllersDentists ++ : getDentists()

  controllersDentists -> modelDentist ++ : find(req.query)
  modelDentist -> DentistsDatabase ++ : DentistSchema
  DentistsDatabase --> modelDentist -- : dentists

  controllersDentists -> modelBooking ++ : populate('bookings')
  modelBooking -> DentistsDatabase ++ : BookingSchema
  DentistsDatabase --> modelBooking -- : bookings

  controllersDentists <-- modelDentist -- : dentists with bookings

  controllersDentists -> user -- : JSON response

  @enduml
