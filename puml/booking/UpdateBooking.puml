@startuml Update Booking

footer Page %page% of %lastpage%
title "Update Bookings"

participant "user/admin" as user
participant "<<javaScript>>\n:server" as server
participant "<<router>>\n:bookings" as routerbooking
participant "<<controllers>>\n:bookings" as controllersbookings
participant "<<model>>\n:Booking" as modelBooking
database "<<MongoDB>>\n:DentistBooking" as DentistBookingDatabase

' user sends a PUT request to update booking
user->server ++: req.put('/api/v1/bookings/:id')
server->routerbooking ++: app.use('/api/v1/bookings', bookings)
routerbooking -> controllersbookings ++: updateBooking()
' Controller fetches the booking from the database
controllersbookings -> modelBooking ++: findBookingById()
modelBooking -> DentistBookingDatabase ++: Booking.findById()
DentistBookingDatabase --> modelBooking --: booking
' Check if user is the owner of the booking
controllersbookings -> modelBooking ++: validateOwner()
' Controller updates the booking
controllersbookings -> modelBooking ++: updateBooking()
modelBooking -> DentistBookingDatabase ++: Booking.findByIdAndUpdate()
DentistBookingDatabase --> modelBooking --: updatedBooking
' Response sent back to user
controllersbookings <-- modelBooking --: updatedBooking
controllersbookings -> user --: response

@enduml